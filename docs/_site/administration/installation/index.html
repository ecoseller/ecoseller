<!DOCTYPE html>

<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Installation | ecoseller</title>
<meta name="generator" content="Jekyll v3.9.3" />
<meta property="og:title" content="Installation" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Table of contents:" />
<meta property="og:description" content="Table of contents:" />
<link rel="canonical" href="http://localhost:4000/administration/installation/" />
<meta property="og:url" content="http://localhost:4000/administration/installation/" />
<meta property="og:site_name" content="ecoseller" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Installation" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"Article","description":"Table of contents:","headline":"Installation","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/siteicon.png"}},"url":"http://localhost:4000/administration/installation/"}</script>
<!-- End Jekyll SEO tag -->

	<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="ecoseller" />

	<link rel="stylesheet"
		href="//fonts.googleapis.com/css?family=Merriweather:400,400italic,700,700italic|Open+Sans:400,400italic,600,600italic,700,700italic|Inconsolata:400,700">
	<link rel="stylesheet" href="/css/main.css">
	<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" href="/touch-icon.png" sizes="192x192">
	<link rel="icon" type="image/png" href="/images/favicon.ico">

	
</head>

<body>
	<header>
		<h1>
			<a style="color: black;" href="/"><img src="/images/emblem.svg"
					width="100" height="100" alt="ecoseller logo"></a>
			<a>ecoseller</a>
			<button type="button" class="open-nav" id="open-nav"></button>
		</h1>

		<form action="/search/" method="get">
			<input type="text" name="q" id="search-input" placeholder="Search" autofocus>
			<input type="submit" value="Search" style="display: none;">
		</form>

		<nav class="full-navigation" >
			<ul>
				<li class="nav-item top-level ">
					
					<a href="/">Introduction</a>
				</li>
			</ul>

			<ul>
				
				
				<li class="nav-item top-level current">
					
					<a href="/administration/installation/">Administration documentation</a>
					<ul>
						
						<li class="nav-item current"><a
								href="/administration/installation/">Installation</a></li>
						
						<li class="nav-item "><a
								href="/administration/administration/">Administration</a></li>
						
						<li class="nav-item "><a
								href="/administration/localization/">Localization</a></li>
						
						<li class="nav-item "><a
								href="/administration/authorization/">Authorization</a></li>
						
					</ul>
				</li>
				
				<li class="nav-item top-level ">
					
					<a href="/programming/technical-design/">Programming documentation</a>
					<ul>
						
						<li class="nav-item "><a
								href="/programming/technical-design/">Technical design</a></li>
						
						<li class="nav-item "><a
								href="/programming/backend/">Backend</a></li>
						
						<li class="nav-item "><a
								href="/programming/dashboard_storefront/">Dashboard and Storefront</a></li>
						
						<li class="nav-item "><a
								href="/programming/recommender_system/">Recommender system</a></li>
						
						<li class="nav-item "><a
								href="/programming/supportive_services/">Supportive services</a></li>
						
					</ul>
				</li>
				
				<li class="nav-item top-level ">
					
					<a href="/user/dashboard/">User category</a>
					<ul>
						
						<li class="nav-item "><a
								href="/user/dashboard/">User documentation - Dashboard</a></li>
						
						<li class="nav-item "><a
								href="/user/storefront/">User documentation - Storefront</a></li>
						
					</ul>
				</li>
				
			</ul>

			<ul>
				<li class="nav-item top-level ">
					
					<a href="/contribution/">Contribution</a>
				</li>
			</ul>
		</nav>
	</header>

	<section class="main">
		<div class="page-header">
			<h2>Administration documentation</h2>
			<h3>Installation</h3>
		</div>
		<article class="content">
			<p>Table of contents:</p>
<ul id="markdown-toc">
  <li><a href="#prerequisites" id="markdown-toc-prerequisites">Prerequisites</a></li>
  <li><a href="#running-ecoseller" id="markdown-toc-running-ecoseller">Running <strong>ecoseller</strong></a>    <ul>
      <li><a href="#development-environment" id="markdown-toc-development-environment">Development environment</a></li>
      <li><a href="#production-environment" id="markdown-toc-production-environment">Production environment</a>        <ul>
          <li><a href="#reverse-proxy" id="markdown-toc-reverse-proxy">Reverse proxy</a></li>
          <li><a href="#demo-environment" id="markdown-toc-demo-environment">Demo environment</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#environment-variables" id="markdown-toc-environment-variables">Environment variables</a>    <ul>
      <li><a href="#backend-" id="markdown-toc-backend-">Backend <span id="env-backend"><span></span></span></a>        <ul>
          <li><a href="#example" id="markdown-toc-example">Example</a></li>
        </ul>
      </li>
      <li><a href="#recommendation-system-" id="markdown-toc-recommendation-system-">Recommendation system <span id="env-rs"><span></span></span></a>        <ul>
          <li><a href="#example-1" id="markdown-toc-example-1">Example</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#reserved-ports" id="markdown-toc-reserved-ports">Reserved ports</a></li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>
<p>Before proceeding with the installation of <strong>ecoseller</strong>, it is important to ensure that your machine meets the necessary prerequisites. While <strong>ecoseller</strong> itself is not demanding and can run on less powerful devices, it is recommended to have a slightly more capable setup for the default installation, especially when including the Elasticsearch and AI recommendation system.</p>

<p>To run <strong>ecoseller</strong> with the AI recommendation system and Elasticsearch, we recommend using a machine with the following specifications:</p>

<ul>
  <li>CPU: 8 cores or more</li>
  <li>RAM: 8GB or more</li>
  <li>Free Space: 10GB</li>
</ul>

<p>Itâ€™s worth noting that Elasticsearch itself requires a significant amount of memory to run efficiently, ideally around 4GB. Therefore, the suggested 8GB RAM allocation ensures smooth operation of both <strong>ecoseller</strong> and Elasticsearch.</p>

<p>However, if you are running <strong>ecoseller</strong> without the Elasticsearch and AI recommendation system or with a smaller dataset, you can use less powerful devices as well.</p>

<p>Based on our testing, we have observed that for a typical scenario with 2100 product variants and several thousand events, the training process for Level 3 recommendations requires a maximum of 1GB of RAM and completes within approximately 2 seconds. For Level 2 recommendations, the memory consumption is around 130MB, and the training process takes approximately 92 seconds.</p>

<p>By considering these prerequisites and performance benchmarks, you can ensure optimal performance and resource allocation for <strong>ecoseller</strong> and its AI recommendation system.</p>

<p>Since <strong>ecoseller</strong>Â is fully containerized, make sure your system is Docker-ready before proceeding with the installation. If you are new to Docker, you can refer to the official <a href="https://docs.docker.com/get-docker/">Docker documentation</a> for detailed instructions on installing Docker on your machine.</p>

<p>Also you <strong>should have some experience</strong> with <a href="https://docs.docker.com/get-docker/">Docker Compose</a>, <a href="https://docs.djangoproject.com/en/4.2/">Django</a>, <a href="https://www.python.org/doc/">Python</a> and<a href="https://nextjs.org/docs"> Next.js (React)</a>. If not - you can learn it from the official documentations. If you donâ€™t have time for that - you can hire us to do it for you (the way it was meant to without compromises). ðŸ˜‰</p>

<h1 id="running-ecoseller">Running <strong>ecoseller</strong></h1>
<p><strong>ecoseller</strong> can be deployed in different environments depending on your needs, whether itâ€™s for development, production, or a demo environment. This section will guide you through the steps to run Ecoseller in each of these environments.</p>

<p>The starting point, however, is the same for all environments. You need to clone the <strong>ecoseller</strong> repository from the source code repository and navigate to the project directory in your terminal.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/ecoseller/ecoseller.git
</code></pre></div></div>
<p><img src="../../images/admin/docker.png" alt="Docker services" /></p>

<h2 id="development-environment">Development environment</h2>
<p>To run <strong>ecoseller</strong> in a development environment, follow these steps:</p>

<ul>
  <li>Ensure you have Docker and Docker Compose installed on your system.</li>
  <li>Clone the Ecoseller repository from the source code repository.</li>
  <li>Navigate to the project directory in your terminal.</li>
  <li>Create <code class="language-plaintext highlighter-rouge">src/backend/docker-compose.env</code> from <a href="#env-backend">example</a>. Please make sure <code class="language-plaintext highlighter-rouge">DEBUG</code> flag is set to <code class="language-plaintext highlighter-rouge">1</code> and <code class="language-plaintext highlighter-rouge">DJANGO_ALLOWED_HOSTS</code> is set to <code class="language-plaintext highlighter-rouge">"*"</code> in this file.</li>
  <li>Create <code class="language-plaintext highlighter-rouge">src/recommender_system/docker-compose.env</code> from <a href="#env-backend">example</a>.</li>
  <li>
    <p>Run the following command to start <strong>ecoseller</strong> in development mode: 
<code class="language-plaintext highlighter-rouge">docker compose up</code>.</p>

    <p>This command will start all the containers and services required for <strong>ecoseller</strong> to run. 
All the containers will be started in the foreground, and you will be able to see the logs from each container in your terminal.
Please note that the first time you run this command, it will take some time to download the required images and build the containers.</p>

    <p>Also note that both storefront and dashboard are quite slow in the developement mode since they are running in the debug mode and Next.js rebuilds every single page on every single request.</p>
  </li>
</ul>

<h2 id="production-environment">Production environment</h2>
<p>In a production environment, Ecoseller utilizes a combination of Gunicorn for both Flask Recommender and Django backend, and Nginx to ensure a robust and efficient deployment. The production build mode of Next.js is used to run the storefront and dashboard services. Additionally, Nginx is configured as a reverse proxy to efficiently handle incoming requests and distribute them to the appropriate services.</p>

<h3 id="reverse-proxy">Reverse proxy</h3>
<p>Nginx is used as a reverse proxy to efficiently handle incoming requests and distribute them to the appropriate services.
It acts as a middle layer between the client and the backend services, enhancing performance and enabling load balancing.
Two configurations are supplied for the Nginx reverse proxy:</p>
<ul>
  <li>Simple Port Mapping: In this configuration, Nginx maps incoming requests directly to the appropriate backend service based on port numbers.</li>
  <li>
    <ul>
      <li>Please see <code class="language-plaintext highlighter-rouge">/src/reverse_proxy/nginx.conf</code></li>
    </ul>
  </li>
  <li>Server Name Based Routing: This configuration allows Nginx to utilize different server names to route requests to the corresponding backend services.</li>
  <li>
    <ul>
      <li>
        <ul>
          <li>Please see <code class="language-plaintext highlighter-rouge">/src/reverse_proxy/nginx.example.conf</code>
If you wish to use the Server Name Based Routing configuration, you can rename the <code class="language-plaintext highlighter-rouge">nginx.example.conf</code> file to <code class="language-plaintext highlighter-rouge">nginx.conf</code> and modify it as needed or create your own configuration file and mount it to the Nginx container in the <code class="language-plaintext highlighter-rouge">docker-compose.prod.yml</code> file as shown below:</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">reverse-proxy</span><span class="pi">:</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">reverse_proxy</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">nginx:latest</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">80:80</span>
      <span class="pi">-</span> <span class="s">8080:8080</span>
      <span class="pi">-</span> <span class="s">3032:3032</span>
      <span class="pi">-</span> <span class="s">3033:3033</span>
    <span class="na">volumes</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">./reverse_proxy/your_nginx.conf:/etc/nginx/nginx.conf:ro</span>
    <span class="na">depends_on</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">backend</span>
      <span class="pi">-</span> <span class="s">frontend_storefront</span>
      <span class="pi">-</span> <span class="s">frontend_dashboard</span>
</code></pre></div></div>

<p>Please note that if you are using the Server Name Base Routing configuration, itâ€™s good practice to remove port mapping from the Nginx container in the <code class="language-plaintext highlighter-rouge">docker-compose.prod.yml</code> file.</p>

<p>The production environment can be started by running the following command in the <code class="language-plaintext highlighter-rouge">/src</code> directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker compose <span class="nt">-f</span> docker-compose.prod.yml up <span class="nt">-d</span>
</code></pre></div></div>

<h3 id="demo-environment">Demo environment</h3>
<p>The demo environment in Ecoseller is designed to showcase the platformâ€™s features and functionality using preloaded demo products (1400+), variants (2100+), and additional data. Setting up the demo environment is similar to the production environment, with the main difference being the utilization of the <code class="language-plaintext highlighter-rouge">docker-compose.demo.yml</code> file. Itâ€™s very similar to <code class="language-plaintext highlighter-rouge">docker-compose.prod.yml</code> but it has some additional services that are used to preload the demo data into the database.
You can choose between using reverse proxy or accessing the services directly. However, itâ€™s recommended to use the reverse proxy configuration for the demo environment as well (please see the <a href="#reverse-proxy">Reverse Proxy</a> section for more information as well ass <a href="#production-environment">Production environment</a>).
Our demo data live at public repository <a href="https://github.com/ecoseller/demo-data">ecoseller/demo-data</a></p>

<p>The demo environment can be started by running the following command in the <code class="language-plaintext highlighter-rouge">/src</code> directory:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker compose <span class="nt">-f</span> docker-compose.demo.yml up <span class="nt">-d</span>
</code></pre></div></div>
<p>If you compare <code class="language-plaintext highlighter-rouge">docker-compose.demo.yml</code> and <code class="language-plaintext highlighter-rouge">docker-compose.prod.yml</code>, you can see that main difference is in the build target of <code class="language-plaintext highlighter-rouge">backend</code> service where <code class="language-plaintext highlighter-rouge">demo</code> is utilized.
It means that thereâ€™re different scripts ran on startup, namely <code class="language-plaintext highlighter-rouge">/src/backend/demo_data_loader.sh</code> which clones the repository and moves the data in propriate locations.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/ecoseller/demo-data.git
<span class="nb">mv</span> /usr/src/demo-data/media /usr/src/mediafiles
<span class="nv">PGPASSWORD</span><span class="o">=</span><span class="nv">$POSTGRES_PASSWORD</span> psql <span class="nt">-h</span> <span class="nv">$POSTGRES_HOST</span> <span class="nt">-U</span> <span class="nv">$POSTGRES_USER</span> <span class="nt">-d</span> <span class="nv">$POSTGRES_DB</span> <span class="nt">-p</span> <span class="nv">$POSTGRES_PORT</span> <span class="nt">-a</span> <span class="nt">-f</span> /usr/src/demo-data/sql/mock_data.sql
</code></pre></div></div>

<p><strong>Also, please note, that the demo environment is not intended for production use. Itâ€™s not setup for persistent storage so after you stop the containers all the data will be lost.</strong></p>

<p><img src="../../images/admin/db_product_productvariant_sql.png" alt="Product variants loaded to the database in demo envrionment" /></p>

<h1 id="environment-variables">Environment variables</h1>
<p><strong>ecoseller</strong> utilizes environment variables to configure various aspects of the backend and recommendation system. These environment variables are stored in separate files, namely <code class="language-plaintext highlighter-rouge">docker-compose.env</code>. For the backend itâ€™s <code class="language-plaintext highlighter-rouge">src/backend/docker-compose.env</code> and <code class="language-plaintext highlighter-rouge">src/recommender_system/docker-compose.env</code> for recommendation system. Additionally, the storefront, dashboard, and other services have their environment variables directly specified in the  YAML file for specific docker compose.</p>

<h2 id="backend-">Backend <span id="env-backend"><span></span></span></h2>
<p>This is an example of <code class="language-plaintext highlighter-rouge">src/backend/docker-compose.env</code> file. You can use it as a template for your own configuration.
Please note that in this file you can configure Django backend and all the connections to other services that are used by the backend.
You can find more information about Django environment variables in the <a href="https://docs.djangoproject.com/en/4.2/ref/settings/">official documentation</a>.</p>

<h3 id="example">Example</h3>

<pre><code class="language-env">DEBUG=1 # 1 for development, 0 for production
DJANGO_ALLOWED_HOSTS="*" # for development only 

DATABASE=postgres
DB_ENGINE=django.db.backends.postgresql_psycopg2
POSTGRES_DB=ecoseller
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_HOST=postgres_backend
POSTGRES_PORT=5432

USING_REDIS_QUEUE=1
REDIS_QUEUE_LOCATION=redis

PYTHONUNBUFFERED=1

RS_URL="http://recommender_system:8086"
STOREFRONT_URL="https://www.example.com"

NOTIFICATIONS_CONFIG_PATH="./config/notifications.json"

EMAIL_USE_SSL=1
EMAIL_PORT=465
EMAIL_HOST=smtp.example.com
EMAIL_HOST_USER=ecoseller@example.com
EMAIL_HOST_PASSWORD="yourpassword
EMAIL_FROM=Storefront&lt;ecoseller@example.com&gt;

USE_ELASTIC=1
ELASTIC_HOST="elasticsearch:9200"
ELASTIC_AUTO_REBUILD_INDEX=0
</code></pre>

<h2 id="recommendation-system-">Recommendation system <span id="env-rs"><span></span></span></h2>
<p>This is an example of <code class="language-plaintext highlighter-rouge">src/recommender_system/docker-compose.env</code> file. You can use it as a template for your own configuration, but please note that you need to change the <code class="language-plaintext highlighter-rouge">RS_URL</code> variable to match the URL in your <strong>ecoseller</strong> backend.</p>
<h3 id="example-1">Example</h3>
<pre><code class="language-env">RS_SERVER_HOST=0.0.0.0
RS_SERVER_PORT=8086
RS_SERVER_DEBUG=TRUE

POSTGRES_PASSWORD=zZvyAvzG2O5gfr5

RS_PRODUCT_DB_URL=postgresql://postgres:zZvyAvzG2O5gfr5@postgres_rs:5432/products
RS_FEEDBACK_DB_URL=postgresql://postgres:zZvyAvzG2O5gfr5@postgres_rs:5432/feedback
RS_SIMILARITY_DB_URL=postgresql://postgres:zZvyAvzG2O5gfr5@postgres_rs:5432/similarity
RS_MODEL_DB_URL=postgresql://postgres:zZvyAvzG2O5gfr5@postgres_rs:5432/model
</code></pre>
<h1 id="reserved-ports">Reserved ports</h1>
<p>When running <strong>ecoseller</strong>, it is important to be aware of the reserved ports used by the various services within the platform. Reserved ports ensure that different components of <strong>ecoseller</strong> can communicate with each other effectively through Docker internal network. Here are the reserved ports used in <strong>ecoseller</strong>:</p>

<ul>
  <li>
    <p><strong>Backend Service</strong>: 
The Ecoseller backend service runs on port 8000 by default. This is the primary entry point for accessing the backend APIs.</p>
  </li>
  <li>
    <p><strong>PostgreSQL Backend</strong>:
The Ecoseller backend PostgreSQL service is accessible on port 5433 by default. This is the primary entry point for accessing the backend PostgreSQL database.</p>
  </li>
  <li>
    <p><strong>Backend Redis</strong>:
The Ecoseller backend Redis service is accessible on port 6379 by default. This is the primary entry point for accessing the backend Redis database.</p>
  </li>
  <li>
    <p><strong>Elasticsearch</strong>:
The Elasticsearch service is accessible on port 9200 by default. This is the primary entry point for accessing the Elasticsearch database.</p>
  </li>
  <li>
    <p><strong>Dashboard</strong>:
The dashboard service is accessible on port 3030 by default. This is the primary entry point for accessing the dashboard.</p>
  </li>
  <li>
    <p><strong>Storefront</strong>:
The storefront service is accessible on port 3000 by default. This is the primary entry point for accessing the storefront.</p>
  </li>
  <li>
    <p><strong>Recommendation system</strong>:
The recommendation system service is accessible on port 8086 by default. This is the primary entry point for accessing the recommendation system.</p>
  </li>
  <li>
    <p><strong>PostgreSQL Recommender system</strong>:
The recommender PostgreSQL service is accessible on port 5432 by default. This is the primary entry point for accessing the recommender PostgreSQL database.</p>
  </li>
</ul>

<p>When deploying <strong>ecoseller</strong>, make sure that the necessary ports are accessible and properly configured in your firewall settings or network infrastructure to allow incoming and outgoing traffic to the respective services if you donâ€™t use proxy.</p>

<p>By understanding and managing the reserved ports, you can ensure smooth communication and access to the different components of Ecoseller, enabling seamless functionality and integration within your e-commerce platform.</p>


		</article>
	</section>

	<script>
		document.getElementById("open-nav").addEventListener("click", function () {
			document.body.classList.toggle("nav-open");
		});
	</script>
</body>

</html>